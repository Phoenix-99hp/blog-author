(this["webpackJsonpblog-author"]=this["webpackJsonpblog-author"]||[]).push([[0],[,,function(e,t,n){e.exports={postContainer:"Edit_postContainer__2ZzoW",postInfo:"Edit_postInfo__1us6g",postTitle:"Edit_postTitle__Uw0-m",postBody:"Edit_postBody__3APpR",prevBtn:"Edit_prevBtn__2J18Y",nextBtn:"Edit_nextBtn__15DIz",writeBtn:"Edit_writeBtn__20i1a",deletePostBtn:"Edit_deletePostBtn__1A5S5",deleteCommentsBtn:"Edit_deleteCommentsBtn__kfHop",showCommentsBtn:"Edit_showCommentsBtn__1j0jH",commentInfo:"Edit_commentInfo__2m0Wt",commentBody:"Edit_commentBody__vTc7Q",commentsActive:"Edit_commentsActive__S4JC6",commentsInactive:"Edit_commentsInactive__3l0B8",paddingLast:"Edit_paddingLast__3ee5A",logoutBtn:"Edit_logoutBtn__3jlRn",deletePostsBtn:"Edit_deletePostsBtn__2xmV9",logoutContainer:"Edit_logoutContainer__13vK3",btnContainer:"Edit_btnContainer__3bGpf",information:"Edit_information__23Nha",mainContainer:"Edit_mainContainer__2Lfi0"}},,,,,,function(e,t,n){e.exports={commentsActive:"Comments_commentsActive__1gP-5",commentsInactive:"Comments_commentsInactive__1LQYT",commentInfo:"Comments_commentInfo__vOzCZ",commentBody:"Comments_commentBody__3EnWP",paddingLast:"Comments_paddingLast__1BoCA",deleteBtn:"Comments_deleteBtn__3vFHY",noCommentActive:"Comments_noCommentActive__U4rlS",noCommentInactive:"Comments_noCommentInactive__1XtZI",commentName:"Comments_commentName__2Arjx"}},,function(e,t,n){e.exports={postContainer:"Write_postContainer__1vC8O",postInfo:"Write_postInfo__3D912",postTitle:"Write_postTitle__2EyrZ",postBody:"Write_postBody__3Rt5W",inputContainer:"Write_inputContainer__2gxn6",postArea:"Write_postArea__3PEF3",submitCancelContainer:"Write_submitCancelContainer__3Wthd",submitCommentBtn:"Write_submitCommentBtn__3dP07",cancelBtn:"Write_cancelBtn__cCUCV",commentBtn:"Write_commentBtn__2KYnL",mainContainer:"Write_mainContainer__1KX0t"}},,,,function(e,t,n){e.exports={error:"Unauthorized_error__1axU-",link:"Unauthorized_link__3poo4",errorSpan:"Unauthorized_errorSpan__1ODMW"}},function(e,t,n){e.exports={error:"Error_error__2WwmA",link:"Error_link__1cUrZ",errorSpan:"Error_errorSpan__1Eg5R"}},,function(e,t,n){e.exports={container:"Layout_container__1nNA4",main:"Layout_main__1dFZc"}},,,function(e,t,n){e.exports={postBody:"NoPosts_postBody__1vJ4k",postContainer:"NoPosts_postContainer__35G7c"}},function(e,t,n){e.exports={password:"Login_password__4_z11",login:"Login_login__3IC9Q"}},,,,function(e,t,n){e.exports={spinner:"Spinner_spinner__1Neu5",spin:"Spinner_spin__2cA5G"}},,function(e,t,n){e.exports=n(38)},,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(24),c=n.n(r),i=n(9),m=n(1),s=n(17),l=n.n(s),u=function(e){var t=e.children;return a.a.createElement("div",{id:l.a.container},a.a.createElement("main",{id:l.a.main},a.a.createElement("h1",null,"Blog"),t))},p=n(4),_=n(10),d=n.n(_),f=n(25),E=n.n(f),h=function(){return a.a.createElement("div",{id:E.a.spinner})},C=function(){return"undefined"!==typeof window},b=function(){return C()&&window.sessionStorage.getItem("User")?JSON.parse(window.sessionStorage.getItem("User")):null},v=function(e,t){if(!C())return null;!function(e){C()&&window.sessionStorage.setItem("User",JSON.stringify(e))}(e),t.push("/home")},B=function(){return!(!C()||!b())||null},g=function(){var e=Object(o.useState)(!0),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(m.f)();Object(o.useEffect)((function(){setTimeout((function(){r(!1)}),1e3)}),[]);return n?a.a.createElement(h,null):a.a.createElement("div",{id:d.a.mainContainer},a.a.createElement("div",{id:d.a.inputContainer},a.a.createElement("label",null,"Title: "),a.a.createElement("input",{id:d.a.postTitle})),a.a.createElement("textarea",{id:d.a.postArea}),a.a.createElement("div",{className:d.a.submitCancelContainer},a.a.createElement("button",{id:d.a.submitCommentBtn,onClick:function(e){return function(e){e.preventDefault();var t={title:e.target.parentElement.previousElementSibling.previousElementSibling.children[1].value.trim(),text:e.target.parentElement.previousElementSibling.value.trim(),user:b()};fetch("https://nameless-plains-23983.herokuapp.com/api/posts/new",{method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e.updated?c.replace("/home"):c.replace("/error")})).catch((function(e){c.replace("/error")}))}(e)}},"Submit Post"),a.a.createElement("button",{id:d.a.cancelBtn,onClick:function(){return c.replace("/home")}},"Cancel")))},j=n(14),O=n.n(j),S=function(){var e=Object(o.useState)(!0),t=Object(p.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){setTimeout((function(){r(!1)}),1e3)}),[]),n?a.a.createElement(h,null):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{id:O.a.error},"Error: ",a.a.createElement("span",{id:O.a.errorSpan},"You are not authorized to view this page.")),a.a.createElement(i.b,{id:O.a.link,to:"/"},"Back to Login"))},N=function(){return a.a.createElement(u,null,B()?a.a.createElement(g,null):a.a.createElement(S,null))},k=n(13),w=n.n(k),y=n(2),I=n.n(y),T=n(8),A=n.n(T),x=function(e){var t=e.commentsAreActive,n=e.currentPost,r=Object(o.useState)(!1),c=Object(p.a)(r,2),i=c[0],s=c[1],l=Object(o.useState)(!1),u=Object(p.a)(l,2),_=u[0],d=u[1],f=Object(m.f)();Object(o.useEffect)((function(){t&&(s(!0),setTimeout((function(){s(!1)}),1e3))}),[t]),Object(o.useEffect)((function(){d(!!t)}),[t]);return i?a.a.createElement(h,null):n.comments[0]?n.comments.map((function(e,t){return a.a.createElement("div",{"data-id":e._id,className:_?A.a.commentsActive:A.a.commentsInactive,key:t},a.a.createElement("p",{className:"".concat(A.a.commentInfo," ").concat(A.a.commentBody)},e.text),a.a.createElement("p",{className:"".concat(A.a.commentInfo," ").concat(A.a.paddingLast)},a.a.createElement("span",{id:A.a.commentName},e.name)," - ",w()(e.timestamp).format("L")),a.a.createElement("button",{className:A.a.deleteBtn,onClick:function(e){return function(e){var t=e.target.parentElement.dataset.id;fetch("https://nameless-plains-23983.herokuapp.com/api/comments/".concat(t,"/delete"),{method:"DELETE",mode:"cors"}).then((function(e){e?f.replace("/"):f.push("/error")})).catch((function(e){f.push("/error")}))}(e)}},"Delete Comment"))})):a.a.createElement("div",{id:_?A.a.noCommentActive:A.a.noCommentInactive},a.a.createElement("p",null,"There are no comments for this post."))},P=n(20),L=n.n(P),W=function(){return a.a.createElement("div",{className:L.a.postContainer},a.a.createElement("p",{className:L.a.postBody},"There are currently no posts."))},D=function(){var e=Object(o.useState)(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(null),i=Object(p.a)(c,2),s=i[0],l=i[1],u=Object(o.useState)(!1),_=Object(p.a)(u,2),d=_[0],f=_[1],E=Object(o.useState)(!0),b=Object(p.a)(E,2),v=b[0],B=b[1],g=Object(m.f)();Object(o.useEffect)((function(){fetch("https://nameless-plains-23983.herokuapp.com/api/posts",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){e.post[0]?l(e.post[0]):f(!0)})).catch((function(e){g.replace("/error")}))}),[]),Object(o.useEffect)((function(){d&&setTimeout((function(){B(!1)}),1e3)}),[d]),Object(o.useEffect)((function(){s&&setTimeout((function(){B(!1)}),1e3)}),[s]);return v?a.a.createElement(h,null):s?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:I.a.mainContainer},a.a.createElement("div",{className:I.a.postContainer},a.a.createElement("div",{id:I.a.information},a.a.createElement("p",{className:"".concat(I.a.postInfo," ").concat(I.a.postTitle)},s.title),a.a.createElement("p",{className:"".concat(I.a.postBody," ").concat(I.a.postInfo)}," ",s.text),a.a.createElement("p",{className:I.a.postInfo},"Posted: ",w()(s.timestamp).format("L")),a.a.createElement("button",{className:I.a.prevBtn,onClick:function(){return B(!0),r(!1),void fetch("https://nameless-plains-23983.herokuapp.com/api/posts/".concat(s._id,"/prev"),{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){e.post&&l(e.post[0])})).catch((function(e){g.replace("/error")}))}},"Previous"),a.a.createElement("button",{className:I.a.nextBtn,onClick:function(){return B(!0),r(!1),void fetch("https://nameless-plains-23983.herokuapp.com/api/posts/".concat(s._id,"/next"),{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){e.post&&l(e.post[0])})).catch((function(e){g.replace("/error")}))}},"Next"))),a.a.createElement("div",{id:I.a.btnContainer},a.a.createElement("button",{className:I.a.logoutBtn,onClick:function(){return function(e){if(!C())return null;window.sessionStorage.clear(),e.replace("/")}(g)}},"Logout"),a.a.createElement("button",{className:"".concat(I.a.commentBtn," ").concat(I.a.deletePostBtn),onClick:function(){fetch("https://nameless-plains-23983.herokuapp.com/api/posts/".concat(s._id,"/delete"),{method:"DELETE",mode:"cors"}).then((function(){g.replace("/")})).catch((function(e){g.replace("/error")}))}},"Delete Post"),a.a.createElement("button",{className:"".concat(I.a.commentBtn," ").concat(I.a.deleteCommentsBtn),onClick:function(){fetch("https://nameless-plains-23983.herokuapp.com/api/posts/".concat(s._id,"/comments/delete"),{method:"DELETE",mode:"cors"}).then((function(e){e?g.replace("/"):g.replace("/error")})).catch((function(e){g.replace("/error")}))}},"Delete Comments"),a.a.createElement("button",{className:"".concat(I.a.commentBtn," ").concat(I.a.writeBtn),onClick:function(){return g.replace("/write")}},"Write New Post")),a.a.createElement("button",{className:I.a.showCommentsBtn,onClick:function(e){return function(e){var t=e.target;"See Comments"===e.target.innerText?(t.disabled=!0,r(!n),setTimeout((function(){t.disabled=!1}),1e3)):r(!n)}(e)}},n?"Hide Comments":"See Comments"),a.a.createElement(x,{commentsAreActive:n,setCommentsAreActive:r,currentPost:s}))):a.a.createElement(W,null)},U=function(){return a.a.createElement(u,null,B()?a.a.createElement(D,null):a.a.createElement(S,null))},J=n(15),z=n.n(J),F=function(){var e=Object(o.useState)(!0),t=Object(p.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){setTimeout((function(){r(!1)}),1e3)}),[]),a.a.createElement(u,null,n?a.a.createElement(h,null):B()?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{id:z.a.error},"Error: ",a.a.createElement("span",{id:z.a.errorSpan},"Post must have a title and body.")),a.a.createElement(i.b,{id:z.a.link,to:"/home"},"Back to Home")):a.a.createElement(S,null))},G=n(21),Z=n.n(G),H=function(){var e=Object(o.useState)(!0),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(m.f)();Object(o.useEffect)((function(){setTimeout((function(){r(!1)}),1e3)}),[]),Object(o.useEffect)((function(){B()&&c.push("/home")}));return a.a.createElement(u,null,n?a.a.createElement(h,null):a.a.createElement("form",null,a.a.createElement("label",null,"Password:"),a.a.createElement("input",{id:Z.a.password,type:"password"}),a.a.createElement("button",{id:Z.a.login,onClick:function(e){return function(e){e.preventDefault();var t={password:e.target.previousElementSibling.value};fetch("https://nameless-plains-23983.herokuapp.com/api/login",{method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e?v(e,c):c.push("/error")})).catch((function(e){c.push("/error")}))}(e)}},"Log In")))};var Y=function(){return a.a.createElement(i.a,{basename:"/blog-author"},a.a.createElement("div",{className:"App"},a.a.createElement(m.c,null,a.a.createElement(m.a,{exact:!0,path:"/",component:H}),a.a.createElement(m.a,{path:"/home",component:U}),a.a.createElement(m.a,{path:"/write",component:N}),a.a.createElement(m.a,{path:"/error",component:F}))))};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Y,null)),document.getElementById("root"))}],[[27,1,2]]]);
//# sourceMappingURL=main.3b12f728.chunk.js.map